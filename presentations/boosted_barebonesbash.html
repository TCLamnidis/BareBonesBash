<!DOCTYPE html>
<html>
  <head>
    <title>Boosted Bare Bones Bash</title>
    <meta charset="utf-8">
    <style>
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);
      @import url(https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700);
      @import url(https://fonts.googleapis.com/css?family=Roboto+Slab:300,300i,400,400i,700);
      @import url(https://fonts.googleapis.com/css?family=Raleway:300,300i,400,400i,700);


      /* font/size formatting */
      body {
        font-family: 'Raleway', sans-serif;
        font-weight: 300;
        color: #000000;
      }

      h1 {
        font-family: 'Roboto Slab', sans-serif;
        color: #7570b3;
        font-weight: 400;
        font-size: 10px;
      }

      h2 {
        font-family: 'Roboto Slab', sans-serif;
        font-weight: 400;
        font-size: 12px;
        color: #7570b3;
      }

      h3 {
        font-family: 'Raleway', sans-serif;
        color: #7570b3;
      }

      /* improve font size modifications - https://github.com/yihui/xaringan/wiki/Font-Size */

      .huge { font-size: 160% }
      .large { font-size: 130% }
      .medium { font-size: 90% }
      .small { font-size: 70% }
      .tiny{font-size: 40%}

      /* https://github.com/gnab/remark/issues/305#issuecomment-403309989 */
      blockquote {
        border-left: 0.3em solid #ccc;
        padding: 0 15px;
        font-style: italic;
        color: #777;
        quotes: "\201C""\201D""\2018""\2019";
        font-size: 18px;
      }

      .remark-code, .remark-inline-code {
        font-family: 'Ubuntu Mono'; color: grey;
      }

      /* Two-column layouts */
      .cols {
        display: flex;
      }
      .left-column  { width: 49%; float: left; }
      .right-column { width: 49%; float: right; }

      .left-column-33  { width: 33%; float: left; }
      .right-column-66 { width: 66%; float: right; }

      .left-column-66  { width: 66%; float: left; }
      .right-column-33 { width: 33%; float: right; }

      .right-column ~ p { clear: both; }
      .right-column ~ ul { clear: both; }

      /* use with e.g. <div class=vertical-center"> */
      .vertical-center {
         margin: 0;
         position: absolute;
         top: 50%;
         -ms-transform: translateY(-50%);
         transform: translateY(-50%);
      }


      .vertical-center-with-title {
         margin: 0;
         position: absolute;
         top: 60%;
         -ms-transform: translateY(-50%);
         transform: translateY(-50%);
      }


      /* For progress bar */
      .remark-slide-number {
        position: inherit;
      }

      .remark-slide-number .progress-bar-container {
        position: absolute;
        bottom: 0;
        height: 4px;
        display: block;
        left: 0;
        right: 0;
      }

      .remark-slide-number .progress-bar {
        height: 100%;
        background-color: #6a3d9a;
      }

    /* Header and Footer from
    https://github.com/gnab/remark/issues/501#issuecomment-392961900/
    */

    div.my-header {
      background-color: #7570b3;
      position: fixed;
      top: 0px;
      left: 0px;
      height: 10px;
      width: 100%;
      text-align: left;
    }

    div.my-footer img {
      height: 75px;
      width: 75px;
      bottom: 5px;
      right: 5px;
      position: fixed;
    }

  /* Comment  */
  .remark-slide-content {
    font-size: 20px;

  }


    </style>
  </head>
  <body>
    <textarea id="source" bar>

layout: true
<div class="my-header"></div>
   <div class="my-footer"><img src=".images/BareBonesBash_Icon.png" /></div>


---

class: center, middle

# .tiny[_Boosted_ Bespoke]
# .large[**Bare Bones Bash**]
## .tiny[Brought By Blissfully Baffled Bioinformaticians]

Thiseas C. Lamnidis

James A. Fellows Yates

Aida Andrades Valtueña
<br/>
<br/>
<br/>

<a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">
  <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" />
</a>
.small[<br />This work is licensed under a <br/> <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.]

---

# Who are we?

.small[
### ~~Bowser~~ James]
.medium[
- BSc. @ Department of Archaeology (York)
- MSc. @ Institute for Archaeological Sciences (Tübingen)
- Ph.D.(?) @ Department of Archaeogenetics (Jena)
]

.small[### ~~Yoshi~~ Thiseas]
.medium[
- BSc. @ Department of Biology (York)
- MSc. @ Department of Anthropology (Durham)
- Ph.D.(?) @ Department of Archaeogenetics (Jena)
]

.small[### Aida]
.medium[
- BSc. @ UAB Department of Genetics (Barcelona)
- MSc. @ Institute for Archaeological Sciences (Tübingen)
- Ph.D.(?) @ Department of Archaeogenetics (Jena)
]

.right-column-33[
<div class="vertical-center-with-title">
  <img src=".images/James_JamessDaughter_Thiseas_In_Japan.jpg" width="80%">
</div>
]

???
BOTH

---

# Aims of this session


- Aim:

  - Get more familiar with text modification with bash

--

- Objectives:
  - How to find stuff?
  - What is a while loop?
  - How to write a conditional statement (if/else)
  - Regular expressions (aka "Regex")
  - _Simple_ text modfication with `sed` (i.e. witchcraft)
  - _Advanced_ text modification with `awk` (i.e. necromancy)

--

.left-column[
<p align="center">
  <img title="Source https://giphy.com/gifs/comedy-retro-musical-UjYw9fdCEPwU8" src="https://media.giphy.com/media/UjYw9fdCEPwU8/giphy.gif" width=55% >
</p>
]

--

.right-column[
<p align="center">
  <img title="Source: https://giphy.com/gifs/bethesda-elder-scrolls-online-necromancer-zumog-phoom-hsaHwzGKJucbXRa7B6" src="https://media.giphy.com/media/hsaHwzGKJucbXRa7B6/giphy.gif" width=70% >
</p>
] 

---

# Future outcomes

- Make your work more efficient

  - Large scale modifications of files
  - Make your work more reproducible
  - Wizardary (stuff that we can't even imagine...)

<p align="center">
  <img title="Source: https://giphy.com/gifs/t9lPSqrGSc1IOnajTz" 
  src="https://media.giphy.com/media/t9lPSqrGSc1IOnajTz/giphy.gif" width=50% >
</p>

--

- Make fewer mistakes

  - Eliminate human error (blame it on the computer!)

--

- Look like a ~~computer nerd~~ really cool

---

class: center, middle

# **RECAP**: Five Commandments of Bare Bones Bash

???
THISEAS
---

class: middle

.left-column[
### 1. Be lazy!
]

.right-column[
- Desire for shortcuts motivates you explore more!
]

???
It's better to spend 1day working on a script that will save you 5min per day for the rest of your PhD, than putting in those 5 minutes!

TAB will be you favourite key by the time we are done here.

---

class: middle

.left-column[
### 1. Be lazy!
### 2. ~~Google~~ The Hive-Mind knows everything.
]

.right-column[
- Desire for shortcuts motivates you explore more!

- 99% of the time, someone else has already had the same issue.

]
???
HOW to google programming questions is not as trivial as it sounds. In the final part of today's session we can talk a bit about this.

---

class: middle

.left-column[
### 1. Be lazy!
### 2. ~~Google~~ The Hive-Mind knows everything.
### 3. Document everything you do.
]

.right-column[
- Desire for shortcuts motivates you explore more!

- 99% of the time, someone else has already had the same issue.

- Makes future you happy
]

---

class: middle

.left-column[
### 1. Be lazy!
### 2. ~~Google~~ The Hive-Mind knows everything.
### 3. Document everything you do.
### 4. There will ALWAYS be a typo!
]
.right-column[
- Desire for shortcuts motivates you explore more!

- 99% of the time, someone else has already had the same issue.

- Makes future you happy

- Don't get disheartened, even best programmers make mistakes

]

---

class: middle

.left-column[
### 1. Be lazy!
### 2. ~~Google~~ The Hive-Mind knows everything.
### 3. Document everything you do.
### 4. There will ALWAYS be a typo!
### 5. Don't be afraid of you freedom!

]

.right-column[
- Desire for shortcuts motivates you explore more!

- 99% of the time, someone else has already had the same issue.

- Makes future you happy

- Don't get disheartened, even best programmers make mistakes

- Explore! Try out things! 
]

???
In my experience, most of learning in programming happens by failing. Repeatedly! 

---

class: center middle

# Preparation!

---

# Materials

- A long-form walkthrough, and these slides, are all freely avaliable avaliable at: 
[https://github.com/TCLamnidis/BareBonesBash](https://github.com/TCLamnidis/BareBonesBash)

- This session is under **Boosted Bare Bones Bash**

<center>
**INSERT BOOSTED BBB TOC SCREENSHOT HERE**
</center>

---

# Into the hacker-verse


- Connecting to our server
  - In your browser, go to the URL that you got with your login information.
  - Log-in with the user and password we provided you. 

---

class: center

<p align="left"><img src=".images/Jupyter1.png" width="100%" ></p>

---

class: center

<p align="left"><img src=".images/Jupyter2.png" width="100%" ></p>

---

class: center

<p align="left"><img src=".images/Jupyter3.png" width="100%" ></p>

---

class: center

<p align="left"><img src=".images/Jupyter4.png" width="100%" ></p>

---

class: center

<p align="left"><img src=".images/Jupyter5.png" width="100%" ></p>

???
What you see here is the "command prompt". username@server:pwd$
me, at the workshop server. ~ means "my HOME directory" (user specific). 

---

class: middle, center

# Always mind the $!

<p align="center">
  <img title="Source: https://giphy.com/gifs/studiosoriginals-gilphabet-3o84U72tKO389H2lI4" src="https://media.giphy.com/media/3o84U72tKO389H2lI4/giphy.gif" >
</p>

???
in Bash ALWAYS MIND THE $. Only copy after the $ so you dont paste the command prompt too. $ is also important when dealing with variables, which you will see later today.

---

class: center,middle

# Uhh... what did we do?

<p align="center">
  <img title="Source: https://giphy.com/gifs/sonic-the-hedgehog-PJiqz1RHkdtGE" src="https://media.giphy.com/media/PJiqz1RHkdtGE/giphy.gif" >
</p>

---

# Uhh... what did we do?

- **Make** a directory: 

---
# Uhh... what did we do?


- ~~**Make** a directory:~~

- **What** did that do again?

```bash
$ whatis mkdir
## or
$ man mkdir

```

---

# Uhh... what did we do?

- **Make** a directory: 

```bash 
$ mkdir boosted_barebonesbash
```
--

- How to **download** a file?

```bash
$ wget https://github.com/TCLamnidis/BareBonesBash/raw/master/data/NHM/data.csv
```

--

- How to **move** a something e.g. file into a directory?

```bash
$ mv data.csv  boosted_barebonesbash
```

--

- Change **into** a directory

```bash 
$ cd boosted_barebonesbash
```

--

- What's **inside** my directory (with extra info)? 

```bash
$ ls -l
```


---

# Uhh... what did we do?

- What's **inside** a (text) file?

```bash
$ cat data.csv
$ head data.csv
$ tail data.csv
$ less data.csv

```

- How to **combine** tools?

```bash
$ cat data.csv | grep '|'

```

--

.left-column-66[
- How do we **search inside** a text file?
]

.right-column-33[
<p align="center">
  <img title="Source: https://giphy.com/gifs/netflix-orange-is-the-new-black-oitnb-l4FGndnGHA5oA8sX6" src="https://media.giphy.com/media/l4FGndnGHA5oA8sX6/giphy.gif"  width=70% >
</p>
]

--

.left-column-66[
- How do I **edit** a file?
```bash
nano data.csv
```
> To exit without saving any changes: ctrl + x

]


---

# Uhh... what did we do?

- How to assign a **variable**

```bash
Variable=Yes
```

--

- How do I **repeat** a command multiple times on a list of things?

```bash
for i in Greece Spain Britain; do
  echo "Does $i have lovely food? $Variable"
done

```
--
```
Does Greece have lovely food? Yes
Does Spain have lovely food? Yes
Does Britain have lovely food? Yes

```

---

# Preparation


- Download the following file

```bash
<whats_the_command?> tinyurl.com/Boosted-BBB-zip
```

---

# Preparation


- Download the following file

```bash
wget tinyurl.com/Boosted-BBB-zip
```

--

- `unzip` the `.zip` file by **auto-completing the file name with your TAB key!**

```bash
unzip Boosted-BBB-zip
```

--

- Ah that didn't work - `unzip` didn't recognise the file type! What else can `mv` do?

--

.left-column[
```bash
mv Boosted-BBB-zip Boosted-BBB.zip
unzip Boosted-BBB.zip
```

> What is the name of directory you just extracted? 

>What do you see in there?
]

.right-column[
<p align="center">
  <img title="Source: https://giphy.com/gifs/bobs-burgers-fox-bobs-burgers-3og0IRc1sW8yPON3WM" src="https://media.giphy.com/media/3og0IRc1sW8yPON3WM/giphy.gif" width="80%">
</p>
]

---

class: middle,center

<p align="center">
  <img title="Source: https://giphy.com/gifs/mario-super-64-WZdlab0U3AkSc
" src="https://media.giphy.com/media/WZdlab0U3AkSc/giphy.gif">
</p>

Make sure to `cd` back to ~/boosted_barebonesbash now!

---

#Outline

.large[
- Where is my stuff??
- Concept: Datastreams and redirects
- Concept: Quotes matter!
- While loop: to infinity and beyond!
- How to rename stuff
- Concept: Bash expansion
- Concept: Regular expressions
- Conditionals: IF/ELSE
- Modifying files: SED, PASTE, AWK
]

---

# Where is my stuff??

```bash
$ find
```

How can you search for files and directories hidden in layers and layers 
(of your very organised 😉) directories?

<p align="center">
  <img title="https://giphy.com/gifs/download-find-funsubstancea-XSJIE5xMWA9HO
" src="https://media.giphy.com/media/XSJIE5xMWA9HO/giphy.gif">
</p>

---

# Where is my stuff??
```bash
$ find abba_dancing_queen_1976/
```
- **First** part of the `find` command: _the place to look from_

  - e.g. `.` to indicate 'here'
--

  - Could also use `~/`
--

  - Could use absolute path e.g. `/home/james/`

<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>

> **Question** What is the difference between `~/` and `/home/james`?

---

# Where is my stuff??
```bash
$ find abba_dancing_queen_1976/ -name
```
- **First** part of the `find` command: _the place to look from_
  - e.g. `.` to indicate 'here'
  - Could also use `~/`
  - Could use absolute path e.g. `/home/james/`

- **Second** part of the `find` command: _what to look in?_
  - Use `-name` to say look in 'names' of things

---

# Where is my stuff??
```bash
$ find abba_dancing_queen_1976/ -name '*JPG*'
```
- **First** part of the `find` command: _the place to look from_
  - e.g. `.` to indicate 'here'
  - Could also use `~/`
  - Could use absolute path e.g. `/home/james/`

- **Second** part of the `find` command: _what to look in?_
  - Use `-name` to say look in 'names' of things

- **Third** part of the `find` command: _the string to look for in part two_
  - Use wildcards! 

<br/>
<br/>

> **Question** What do wildcards mean? 

---

# Where is my stuff??
```bash
$ find abba_dancing_queen_1976/ -name '*JPG*' -type f
```
- **First** part of the `find` command: _the place to look from_
  - e.g. `.` to indicate 'here'
  - Could also use `~/`
  - Could use absolute path e.g. `/home/james/`

- **Second** part of the `find` command: _what to look in?_
  - Use `-name` to say look in 'names' of things

- **Third** part of the `find` command: _the string to look for in part two_
  - Use wildcards! 

- **Final** part of the `find` command: _what object(s) to look for the string in_
  - f.small[(ile)]
  - d.small[(irectory)]
=======
- `. `: directory where you would like to search
- `-name`: name that you want to find, `*` is a wildcard
- `-type`: if you are searching a file (`f`), directory (`d`)

---
# How do I save my stuff?

How to save the output that is normally printed to screen? <img align='middle' title="https://giphy.com/gifs/transparent-nWGRHBnAl5Kmc
" src="https://media.giphy.com/media/nWGRHBnAl5Kmc/giphy.gif" width="10%">

--

```bash
$ find abba_dancing_queen_1976/ -name '*JPG*' -type f > photo_filepaths.txt
```

You use the _redirect_ symbol (`>`) to say take the output of a command and 
place it into the contents of a file.

--

Check you saved correctly!

```bash
cat photo_filepaths.txt
```

---
# Concept: Datastreams
Programs can take in and spit out data from different _streams_. By default there are 3 such data streams.
--
.left-column[

- `stdin`: the __st__an__d__ard __in__put
- `stdout`: the __st__an__d__ard __out__put
- `stderr`: the __st__an__d__ard __err__or
]
???
stderr is what is usually printed on your screen, while stout is generally what ends up in output files.
--
.right.column[
<p align="center">
  <img src=".images/Datastreams.png" width="50%">
</p>]
???
In the background, each program also broadcasts an `exit code` which tells you if the program encountered errors. You will never see these in the wild, but it's good to know they exist.
--

.left-column[
<br><br><br>___A program is like the human body; One way in, two ways out!___
]
.right-column[<p align="center"><img src="https://media.giphy.com/media/4kg8IIClzvLtC/giphy.gif" title="Source: https://media.giphy.com/media/4kg8IIClzvLtC/" width="40%">
</p>]
???
In this analogy exit codes would be how the person is _feeling_, I suppose.

---
# Pipes revisited
In the first session you learned about piping. Here's how that works!
<br>
<br>
--

<p>
  <img src=".images/Piping.png" width="100%">
</p>
<br>
<br>
The `stdout` of one script becomes the `stdin` of the other. 
`stderr` is printed on your screen.

---
# Concept: Redirects

Much like streams in the real world, datastreams can be redirected. 

???
This way you can save the stdout of a program (or even the stderr) into a file to save for later.

--

- `stdin` can be redirected with `<`.

???
An arrow pointing TO your program name!

--

- `stdout` can be redirected with `>`.

???
An arrow pointing AWAY your program name!

--

- `stderr` can be redirected with `2>`.

???
Because it is the secondary output stream.

--

It is also possible to combine streams, but we won't get into that here.
<p align="center"><img src="https://media.giphy.com/media/3o72EWUgbRNfLegO1W/giphy.gif" title="Source: https://media.giphy.com/media/3o72EWUgbRNfLegO1W/" width="80%">
</p>

---
# Concept: Quotes matter!
In bash, there is a big difference between a single quote `'` and a double quote `"`!

 - The contents of single quotes, are passed on as they are.
 - Inside double quotes, contents are _interpreted_!

???
That means that it will be read just like the rest of the code.

--

.left-column-66[
In some cases the difference doesn't matter:
```bash
echo "I like Greek Food"
echo 'I like Greek Food'
```
```
I like Greek Food
I like Greek Food
```
]

--
.right-column-33[
      <p align="center"><img src="https://media.giphy.com/media/NSqQkXJjnsVpZQezfg/giphy.gif" title="Source: https://media.giphy.com/media/NSqQkXJjnsVpZQezfg/" width="90%">
      </p>
      <p align="center"><img src="https://media.giphy.com/media/bh4jzePjmd9iE/giphy.gif" title="Source: https://media.giphy.com/media/bh4jzePjmd9iE/" width="90%">
      </p>
]

.left-column-66[
In other cases it makes all the difference:
```bash
$ Arr=Banana
$ echo 'Pirates say $Arr'
$ echo "Minions say $Arr"
```
```
$ Pirates say $Arr
$ Minions say Banana
```
]

???
You can already see from the syntax highlighting that $Arr is treated differently in the two quotes.

---
# While loop: to infinity and beyond!

> ???use while to move files out of horrible abba folder mess? 

---
# Renaming files with piping (shit-cleaning)


.left-column[
- `cat photo_filepaths.txt` showed us very ugly file names 😕

- Lets clean this up!

- Lets start by giving the file a _proper_ file suffix
]

.right-column[
<p align="center">
  <img src="https://media.giphy.com/media/l41m2GZsZdZohqmje/giphy.gif" title="Source: https://giphy.com/gifs/adamosgood-monster-spooky-spooktacular-l41m2GZsZdZohqmje" width="60%">
</p>
]

---
# Renaming files with piping (shit-cleaning)

Here comes two new commands
  - `rev`
  - `cut`

Any guesses on what they do?

???
Reward to anyone who uses `whatis` or `man`
---

# Renaming files with piping (shit-cleaning)

Here comes two new commands
  - `rev`: reverses a character string
  - `cut`: cuts a string into multiple pieces

.left-column[
<p align="center">
  <img style="transform: scaleX(-1)" src="https://media.giphy.com/media/mUGRVgAkamLZe/giphy.gif" title="Source: https://giphy.com/gifs/pony-mUGRVgAkamLZe" width="100%">
</p>
]

.right-column[
<p align="center">
  <img style="transform: scaleX(-1)" src="https://media.giphy.com/media/2GdACZsbRnTmo/giphy.gif" title="Source: https://giphy.com/gifs/movie-photoset-2GdACZsbRnTmo" width="93%">
</p>
]

---

# Renaming files with piping (shit-cleaning)

**Step one**: check what `rev` does

```bash
$ while read line; do
>   echo $line | rev
> done < photo_filepaths.txt

```
--
**Step two**: check what `cut` does (`-d`elimiter, `-f`ield)

```bash
$ while read line; do
>   echo $line | cut -d . 
> done < photo_filepaths.txt

```
--
**Step three**: Combine! Reverse, then cut second to 'last' number and re-reverse
.left-column-66[
```bash
$ while read line; do
>   echo   echo $line | rev | cut -d . -f 2-9999 | rev 
> done < photo_filepaths.txt

```
]

.right-column-33[
<p align="center">
  <img src="https://media.giphy.com/media/26gR2f01UTynjCPNS/giphy.gif" title="Source: https://giphy.com/gifs/powerrangers-26gR2f01UTynjCPNS" width="45%">
</p>
]
---

# Renaming files with piping (shit-cleaning)

.left-column[
Now lets apply our new found moonwalking and hairdressing skills

Lets mass rename your files! Using:
  - `while`
  - `variable`
  - `mv`
  - `cut`
  - `rev`
]

--

.right-column[
<p align="center">
  <img src="https://media.giphy.com/media/CpgNjk2E54p7W/giphy.gif" title="Source: https://giphy.com/gifs/lol-shia-labeouf-CpgNjk2E54p7W" width="65%">
</p>
]

--

`$()` indicates that the result of this command should be assigned as a string
```bash
$ while read line; do
>   new_name="$(echo $line | rev | cut -d . -f 2-9999 | rev)"
>   mv "$line" "$new_name"
> done < photo_filepaths.txt

```

---

# Renaming files with piping (shit-cleaning)

**BUT DID IT WORK!?**

--

Use find!

```bash
$ find abba_dancing_queen_1976/ -name '*JPG*' -type f > photo_filepaths_clean.txt
$ cat photo_filepaths_clean.txt | head -n 2
```
--
```
abba_dancing_queen_1976/With/a/bit/of/rock/music/DCIM2827587.JPG.mp3
abba_dancing_queen_1976/With/a/bit/of/rock/music/DCIM2827582.JPG.mp3
```

<p align="center">
  <img src="https://media.giphy.com/media/VbyXgohzJCIRw6uqiP/giphy.gif" title="Source: https://giphy.com/gifs/CBSAllAccess-season-2-episode-8-happy-days-VbyXgohzJCIRw6uqiP" width="30%">
</p>

---

# Renaming files with piping (lazy shit-cleaning)

But we can be even .large[more] lazy!

What if you didn't have to make the terminal version of a human centipede?

 .small[_\[still no gif for job security reasons\]_]

These aren't actually MP3s, these are files. How can we remove `.mp3`?


--
```bash
$ while read line; do
>   mv "$line" ${line%%.mp3*}
> done < photo_filepaths_clean.txt
$ find abba_dancing_queen_1976/ -name '*JPG*' -type f | head -n 2
```
.left-column-66[
```
abba_dancing_queen_1976/With/a/bit/of/rock/music/DCIM2349817.JPG
abba_dancing_queen_1976/With/a/bit/of/rock/music/DCIM2349815.JPG
```
]

.right-column-33[
<p align="center">
  <img src="https://media.giphy.com/media/13r9tgg7ZisiT6/giphy.gif" title="Source: https://giphy.com/gifs/michelle-tanner-stickleyman-13r9tgg7ZisiT6" width="35%">
</p>
]

---

# Concept: Parameter expansion

In the example above, you used `$()` to only keep the parts of the contents of variable `line`. 
```bash
$ while read line; do
>   new_name="$(echo $line | rev | cut -d . -f 2-9999 | rev)"
>   mv "$line" "$new_name"
> done < photo_filepaths.txt
```
???
This is code is quite explicit. Too much typing for the **truly lazy**!

--

We can make it shorter and better with **parameter expansion**.

???
Remember how we were saying a variable is like an box that you can put anything inside? Parameter expansion lets you play around with the contents of a the box AS you open it. 

--

<p align="center">
  <img src="https://tenor.com/view/coal-no-presents-nooo-christmas-snowman-gif-10460388.gif" title="Source: https://tenor.com/R3n6.gif" width="35%">
  <img src="https://media.giphy.com/media/xUA7aUNSe18p3tac5W/giphy.gif" title="Source: https://media.giphy.com/media/xUA7aUNSe18p3tac5W/giphy.gif" width="41%">
</p>

???
Imagine if you got a box of coal for christmas. Then as you open it, you turn the coal into diamonds. Pretty handy!

---

# The basics

Here's our example variables:
```bash
foo="/home/thiseas/folder/subfolder/BBB.is.bae.txt"
bar="/home/thiseas/folder/subfolder/BBB_is_bae.txt"
```
???
Two absolute file paths to some imaginary files.

--

To expand a variable use `${}`.
```bash
echo ${foo}
```
```
/home/thiseas/folder/subfolder/BBB.is.bae.txt
```
--

You can also add a **parameter** to expansions:
```bash
echo ${foo%.txt} 
echo ${#foo}
```
```
/home/thiseas/folder/subfolder/BBB.is.bae
45
```


---
# Renaming files with piping (renaming shit)

More complex!


```bash
find abba_dancing_queen_1976/ -name '*JPG*' -type f rename 's/.mp3//'
```

---
# Concept: Regular expressions
- Strings that define a seach pattern
- Used in 'Search' or 'Search/Replace' functions
- You have already used them!
---
# Regex Basics
- . : match any character

--

- []: match range of characters with in []
- [^]: match range of characters except the ones in the bracket
- *: match 0 or more of the preceding items
- +: match 1 or more of the preceding items
- ?: match 0 or 1 of the preceding items
- \: skip character
- ^: beginning line
- $: end of the line
---
#Renaming files with piping (regular expressions)
---
#Conditionals: If/Else statements
---
#Modifying files
---
#SED
---
#PASTE
---
#AWK


    </textarea>
    <script src="https://remarkjs.com/downloads/remark-latest.min.js">
    </script>
    <script>
      var slideshow = remark.create({
      /*ratio: "16:9", from: https://github.com/gnab/remark/issues/86#issuecomment-36157045*/
      slideNumberFormat: (current, total) => `
        <div class="progress-bar-container">
          <div class="progress-bar" style="width: ${current/total*100}%">
          </div>
        </div>
      `
    });
    </script>
  </body>
</html>
