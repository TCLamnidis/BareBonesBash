<!DOCTYPE html>
<html>
  <head>
    <title>Basic Bare Bones Bash</title>
    <meta charset="utf-8">
    <style>
      @import url(https://fonts.googleapis.com/css?family=Maven+Pro:400,700,400italic);
      @import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body { font-family: 'Maven Pro', sans-serif; }
      h1, h2, h3 {
        font-family: 'Maven Pro', bold,sans-serif;
        font-weight: normal;
      }
        .cols {
        display: flex;
      }
      
      .fifty {
        flex: 50%;
      }
      .sixty {
        flex:60%;
      }
      
      .thirty {
        flex: 30%;
      }

      blockquote {
        border-left: 0.3em solid #ccc;
        padding: 0 15px;
        font-style: italic;
        color: #ccc;
        quotes: "\201C""\201D""\2018""\2019";
      }

      .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; color: grey}
    </style>
  </head>
  <body>
    <textarea id="source">

class: center, middle

**Basic** Bespoke 
# BARE BONES BASH 
Brought By Bearded Bioinformaticians

### Thiseas C. Lamnidis and James A. Fellows Yates

---

# Who are we?

.cols[
.thirty[
## James

- BSc. @ Department of Archaeology (York)
- MSc. @ Institute for Archaeological Sciences (T√ºbingen)
- Ph.D.(?) @ Department of Archaeogenetics (Jena)
]

.fifty[
<p align="center">
  <img src=".images/James_JamessDaughter_Thiseas_In_Japan.jpg" width="95%" height = "95%">
</p>

<p align="center">
  (no children were licked in the making of this presentation, honest)
</p>
]

.thirty[
## Thiseas 

- BSc. @ Department of Biology (York)
- MSc. @ Department of Anthropology (Durham)
- Ph.D.(?) @ Department of Archaeogenetics (Jena)
]
]

---

class: center, middle

.cols[
.fifty[
# Neither of us...
##...has a computational background
]

.fifty[
Except in internet memes!
<p align="center">
  <img src=".images/science_dog.jpg" width="95%" height = "95%">
</p>
]
]

---

# How did we learn to do everything you're about to learn?

- Being lazy
- Google
- Talking to each other
- Metric tons of TRIAL AND ERROR (tears, manic screaming, blood...)

---

# Aims of this course

- Aim:
  - To get you comfortable enough with the terminal to try it out

- Objectives
  1. What is a terminal?
  2. How to navigate around your computer with the terminal?
  3. How to interact with text files?
  4. How to combine multiple programs into a single command?
  5. How to save file space with shortcuts
  6. What is a variable? What is a for loop?

---

# Future outcomes

- Make your work more efficient
  - Large scale modifications of files
  - Make your work more reproducible
  - Wizardary (stuff that we can't even imagine...)
- Make less mistakes
  - Eliminate huamn error (blame it on the computer!)
- Look like a ~~computer nerd~~ really cool

---

class: center, middle

# Five Commandments of Bare Bones Bash

---

class: middle

.cols[
.fifty[
# Rule Nr. 1
## Be lazy!
]
.fifty[
Desire for shortcuts motivates you explore more!
]
]

---

class: middle


.cols[
.fifty[
# Rule Nr. 2
## ~~Google~~ The Hive-Mind knows everything.
]
.fifty[
- 99% of the time, someone else has already had the same issue.
- Let the poor soul do the work for you!
- (...and pass it on!)
]
]

---

class: middle


.cols[
.fifty[
# Rule Nr. 3
## Document everything you do.
]
.fifty[
- Makes future you happy
- Reproducibility
- Helps others!
]
]

---

class: middle


.cols[
.fifty[
# Rule Nr. 4
## There will ALWAYS be a typo!
]
.fifty[
- Don't get disheartned, even best programmers make mistakes
- Sometimes the problem _isn't_ you being 'stupid', programmers are crap at documentation
]
]

---

class: middle


.cols[
.fifty[
# Rule Nr. 5
## Something to come....
]
]

---

# Connecting to our server


 * Go to https://c107-224.cloud.gwdg.de
 * Log-in with the user and password we provided you. 

---

class: center

<p align="left"><img src=".images/Jupyter1.png" width="100%" ></p>

---

class: center

<p align="left"><img src=".images/Jupyter2.png" width="100%" ></p>

---

class: center

<p align="left"><img src=".images/Jupyter3.png" width="100%" ></p>

---

class: center

<p align="left"><img src=".images/Jupyter4.png" width="100%" ></p>

---

class: center

<p align="left"><img src=".images/Jupyter5.png" width="100%" ></p>

???
What you see here is the "command prompt". username@server:pwd$
me, at the workshop server. ~ means "my HOME directory" (user specific). 

---

class: middle, center

#Always mind the $!

<p align="center"><img title="Source: https://giphy.com/gifs/studiosoriginals-gilphabet-3o84U72tKO389H2lI4" src="https://media.giphy.com/media/3o84U72tKO389H2lI4/giphy.gif" ></p>

???
in Bash ALWAYS MIND THE $. Only copy after the $ so you dont paste the command prompt too. $ is also important when dealing with variables, which you will see later today.

---

# Navigating the maze

As we mentioned, _~_ is your _home directory_. But where _is_ your home?

```bash
pwd
```
--
This prints the entire "filepath" of the directory i.e. the route from the "root" 
(a specific directory on the machine), through every subdirectory, leading to your 
particular folder. 

```
/home/thiseas
```

---

# Let's talk about paths!
.cols[
.sixty[
While walking around downtown Jena, you feel a rumble in your belly, and feel a craving that only a _currywurst with sweet potato fries_ can fulfill. 

You look around and see a stranger sitting under __the statue of Kurf√ºrst Johann Friedrich.__ You approach the stranger and ask them for directions to Fritz Mitte!]

.sixty[<p align="right"><img src=".images/Jena_Marktplatz_by_C.Loeser.jpg" width="80%" > <figcaption align="right">Photo by C. Loeser. CC-BY</figcaption></p>
]
]

---

# Absolute paths
.cols[
.sixty[
The location of a file or folder, __from the ‚Äúroot‚Äù directory__ (/).


Equivalent to getting directions to Fritz Mitte, from Jentower (the de facto landmark in Jena).


>___‚ÄúFrom Jentower, cross Leutragraben and turn right. You will see FM 100m ahead!‚Äù___
<p align="right"><i>Kind stranger, 2019</i></p>

--

__Absolute__ paths always start with `/`. Paths starting with `~` are also absolute paths, since `~` translates to the absolute path of your specific home directory. That is the directory path you see in the output of the `pwd` command you just ran.
]


.sixty[<p align="right"><img src=".images/JenTower_by_Igor_Slovak.jpg" width="80%" > <figcaption align="right">Photo by Igor Slovak. CC-BY-SA</figcaption></p>
]
]
???
These directions are true no matter where in town you happen to be.

---

# Relative paths
.cols[
.sixty[
The location of a file or folder, __from your current directory.__

Equivalent getting directions to Fritz Mitte from your current location.

>___‚ÄúGo down that road, turn left, then keep going straight until you see it!‚Äù___
<p align="right"><i>also Kind stranger, 2019</i></p>

__Relative__ paths are always relative to your working directory (i.e.
  your current directory). Often this type of path will begin with one (`./`) 
  or two (`../`) dots followed by a forward slash. 
  
__NOTE:__ In the syntax of relative paths `.` means "the current directory" and `..` means "the parent directory" (or the 'one above'). 
]


.sixty[<p align="right"><img src=".images/Jena_Johannistor_by_Andreas_Praefcke.jpg" width="75%" > <figcaption align="right">Photo by Andreas Praefcke. CC-BY</figcaption></p>
]
]
???
These directions are easier to follow, but only work if you begin AT MARKTPLATZ.

---

class: center,middle
# Playing with the files, one bit at a time

---

# Time to play!

.cols[
.fifty[

- We have a place to organise our files... but no files :\(

--

- We aren't playing with bears today
  - That's dangerous! 
  - Lets play with some Mammoths instead!
  ]
  .fifty[
  <p align="center">
    <img title="Source: https://giphy.com/gifs/sid-ice-age-a-mammoth-christmas-kbuQOkATEo6VW" src="https://media.giphy.com/media/kbuQOkATEo6VW/giphy.gif"> 
    <img title="Source: https://giphy.com/gifs/3o6Zte5Q11lxAu8Q5q" src="https://media.giphy.com/media/3o6Zte5Q11lxAu8Q5q/giphy.gif" width = "65%">
  </p>
  ]
] 

---

# Downloading files with `wget`

We are going to download a FASTQ file from the ENA (European Nucleotide Archive). This should be pretty quick!

> For non-squishy dead thing nerds: a FASTQ file is just a text file with DNA molecule sequences and extra metadata]


<p align="center">
  <img title="Source: https://giphy.com/gifs/mario-kart-lAIbbDbcXSZSU" src="https://media.giphy.com/media/lAIbbDbcXSZSU/giphy.gif" width="20%">
</p>

--

```bash
## Download!
wget ftp.sra.ebi.ac.uk/vol1/fastq/ERR202/001/ERR2020601/ERR2020601.fastq.gz

## if you don't have wget, you can instead use 'curl' with the command below.
# curl -O ftp.sra.ebi.ac.uk/vol1/fastq/ERR202/001/ERR2020601/ERR2020601.fastq.gz

## Then to check if the file is now in our working directory
ls

```

---

# Organise yo' stuff!

Use `mv` as it should be used, and move your newly downloaded file into your workshop folder.

Then check to see if it moved!

--

```bash
mv ~/ERR2020601.fastq.gz ~/BareBonesBash
ls
```

--

You should now see that the fastq file is no longer in your home folder.

---

# But where did it go?!

Lets see if it went to were we told it to go...

--

```bash
cd ~/BareBonesBash
ls 
```

Good, the file arrived in `~/BareBonesBash/` safely!  But what is in it?

---


# Meow 


.cols[
.fifty[
In bash, you can normally use 
`cat` with text files, short for con**cat**enate, which is used to print the 
contents of a file to the screen. Lets try this with our newly downloaded file.
]
.fifty[
<p align = "center">
<img title="Source: https://giphy.com/gifs/meow-descriptive-noise-x4YHSKRpYQhLq" src="https://media.giphy.com/media/x4YHSKRpYQhLq/giphy.gif" width = "90%"> 
</p>
]
]


--

> **BONUS TIP TIME!** If you're anything like Thiseas, who gets triggered at slow 
computer things, and prefer to have the computer do the work for you - try 
typing a couple of characters then press the "TAB" key on your keyboard.

--

```bash
cat ERR2020601.fastq.gz
```
--

```
ÔøΩÔøΩ'ÔøΩÔøΩxÔøΩÔøΩxIÔøΩÔøΩ-]ÔøΩÔøΩÔøΩÔøΩÔøΩ2ÔøΩÔøΩuÔøΩ_SuYÔøΩ9AÔøΩ}W.ÔøΩÔøΩZfÔøΩÔøΩ?ÔøΩÔøΩÔøΩ}HÔøΩÔøΩÔøΩÔøΩ9ÔøΩK…∞ÔøΩÔøΩÔøΩÔøΩÔøΩl
ÔøΩBÔøΩÔøΩst›πlfDtÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ-LÔøΩÔøΩ|x:ÔøΩMUtIÔøΩÔøΩÔøΩÔøΩuÔøΩ1ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ"dÔøΩHÔøΩFÔøΩÔøΩÔøΩÔøΩ
```

--


---

# Oh...

.cols[
.fifty[

- You probably had a bunch of junk printed to screen or nothing displayed 
  - just press enter to cancel

- That's because the FASTQ file, as with almost all FASTQs, is compressed 
  - as indicated by the .gz

]

.fifty[
<p align="center">
  <img title="Source: https://giphy.com/gifs/kQbMO5X7UA1C8" src="https://media.giphy.com/media/kQbMO5X7UA1C8/giphy.gif", width="80%">
</p>
> Looks like curiosity killed the `cat`!
]
]

---

## Viewing the gz

To view the _human readable_ contents of the file, we 
can instead use `zcat`. Don't forget your auto-complete!

--

```bash
$ zcat ERR2020601.fastq.gz

```

--

```
@ERR2020601.147099 F_AHSTEUER006:166:C5UJMANXX:8:2109:2222:68258/1
TCTGCGTCCGTCATATCTATTGCCCAGTCACTAGTCACTAGTCA
+
3:3AAEFGGGGGGGGGGGEGGCDGGGBGGGGGFGFGEGGGGGGG
@ERR2020601.147100 F_AHSTEUER006:166:C5UJMANXX:8:1315:17303:82366/1
TGGTCGCTGCCGCGAGCGGATTCCTGCTGA
+
3B=@BECGGGGGGGGGGGGGGGGGGGGGGG
```

That looks much better, we can now actually see some DNA sequences! 

--

> **BONUS TIP TIME!** try pressing `ctrl+l`, which will clear your terminal of 
> all the junk that was printed to your screen. This does NOT delete those lines, 
> it simply scrolls down for you. You can still find all your previous work if
> you scroll up.

---

class: center,middle
# Asking the computer for help (it loves helping people)

A.K.A. when your tutor thinks of a very (un)funny metaphor to explain something!

---

class: center,middle
# The Lord of the Pipes: One command to do them all.

---

# Ceci n'est pas une pipe

After that tangent, let's get back to our regularly scheduled program(ming)!

--

Now we will get familiar with the most important functionality of bash: the
concept of the `|` (a.k.a the "pipe")

<p align="center">
  <img title="Made with EZGif.com" src="../docs/.gifs/Boromir.gif" > 
</p>
<p align="center">
  <img title="Source: https://tinynin.wordpress.com/2012/01/08/marioportal-warp-pipe/" src="https://tinynin.files.wordpress.com/2012/01/warppipe-copy.gif" width = "30%" >
</p>

---

# Pass the parcel

- A pipe passes the output of one command and gives it as input to the next. 
- It allows us to string multiple commands together, one after the other, 
  - which means you can do more complicated (and beautiful) things to your files "on the fly". 

--

Lets try this out with new new commands

.cols[
.fifty[
- `head` 
  - shows first 10 lines of a file
- `tail` 
  - shows the last 10 lines. 
]
.fifty[

<p align="center">
<iframe align="center" src='https://gfycat.com/ifr/MeekWarpedAsiandamselfly' frameborder='0' scrolling='no' allowfullscreen></iframe> 
</p>
]
]

---

# Tiene cabeza...

We will now print the file to screen with `zcat`, but rather than just let 
the whole thing print, we will "pipe" the output into `head`, which will 
allow us to see just the first 10 lines.

```bash
zcat ERR2020601.fastq.gz | head

```
--

We can also display more lines with the `-n` flag (short for "**n**umber of 
lines"). To see the first 20 lines you would use 

```bash
zcat ERR2020601.fastq.gz | head -n 20

```

---

# ...y tiene cola

The same option exists for tail, note that but options are not universal! Not 
every programme will use the same options!

```bash
zcat ERR2020601.fastq.gz | tail -n 4

```

--

And you can also chain them altogether _\[not unlike a human centipede... No 
gif here so we don't get fired]_

--

```bash
zcat ERR2020601.fastq.gz | head -n 20 | tail -n 4
```

The above command will print the whole file, but capture only the first 20 
lines, before printing out the last 4 lines of these 20.

<p align="center"><img title="Made with EZGif.com" src="../docs/.gifs/frodo.gif" width="30%" height="20%"></p>

---

# Slow down dude...

But what if you wanted to view the whole file "at your own leisurely pace"

<p align="center">
  <img title="Source: https://giphy.com/gifs/stroll-82abB3W2DknkY" src="https://media.giphy.com/media/82abB3W2DknkY/giphy.gif" width="20%">
</p>

We can use the tool `less`, which prints the file to screen, but allows you 
to move up and down the output with your `arrow keys`. You can also move down 
a full screen with the `spacebar`.

```bash
zcat ERR2020601.fastq.gz | less

```

To quit the viwer: press "q" on your keyboard.
---


# Hold your horses... what does all this junk mean!?

In practice, what was just printed on your screen is the record of a single DNA 
molecule, which spans 4 lines of the FASTQ file. 

* The record begins with the read ID, preceded by an `@`, given by the sequencing machine
* The next line contains the actual DNA sequence of the read. 
* The third line is a separator line ('`+`'). 
* Finally, the fourth line of this record contains the base quality score for each position on the read, encoded a certain way.  (again something the sequencer)


# lol wut?

Don't worry if this makes no sense...

--

The important thing is that there is a repeated structure in the file (in this 
case a collection of lines with the same structure for each DNA molecule)


Why does this matter?

-- 

.cols[

.fifty[
This means PATTERNS!
]

.fifty[
<p align="center">
  <img title="Source: https://giphy.com/gifs/WgO1QdDfTooxrEsfES" src="https://media.giphy.com/media/WgO1QdDfTooxrEsfES/giphy.gif" width="20%">
</p>

]
]

---

class: center,middle
# Now you're thinking with portals! Symlinks and their usefulness 

---

class: center,middle
# Laziness 101: Minimising our work by maximising the work of the computer

---

class: center,middle

# The road so far

---

class: center,middle

# OPTIONAL: The Cleanup Crew

---



# Thanks to...

- Stephan Schiffels - for loaning us his cluster
- Aida Andrades Valute√±a - for suggestions/ideas and protecting James' daughter from dying of embarrassement.
- **YOU!** for putting up with an inordinate amount of internet memes and gifs. 

    </textarea>
    <script src="https://remarkjs.com/downloads/remark-latest.min.js">
    </script>
    <script>
      var slideshow = remark.create();
    </script>
  </body>
</html>